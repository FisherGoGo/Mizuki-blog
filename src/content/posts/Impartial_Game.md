---
title: 博弈论
published: 2025-03-26
tags: [MATH]
category: Knowledge
draft: false
---

- 博弈论是研究在一个游戏中多位玩家的策略
- 分为**公平组合游戏**和**非公平组合游戏**
- 我们一般见到的大部分为前者

# 公平组合游戏

## Nim游戏

- 我们有 $n$ 堆物品，每堆有 $a_i$ 个，两个玩家轮流取走任意一堆的任意个物品，但不能不取
- 最后把物品取完的人胜利

### 博弈图和状态

- 加入我们把每一个状态定为一个节点，每个状态向它的后继状态连边，我们就可以得到一个博弈图
- 我们再定义**必胜**状态为**先手必胜**的状态，**必败**状态为**先手必败**的状态
- 这样我们可以得出三条定理
	- **没有后继状态**的状态时必败状态
	- 一个状态是必胜状态**当且仅当存在至少一个必败状态**为它的后继状态
	- 一个状态是必败状态当且仅当它的**所有后继状态均为必胜状态**
- 画出来的图是一个 **DAG**

### Nim和

- 如果我们用博弈图来求解Nim游戏，复杂度将是 $O(\prod_{i=1}^na_i)$ 
- 那有没有更快的方法
- 我们定义 Nim和为 $a_1\oplus a_2...\oplus a_n$    
- 当且仅当Nim和为 $0$ 时先手必败，否则为必胜

### 证明

- 没有后继状态的状态是必败状态：
	- 只有全 $0$ 状态是必败状态
- 对于 $a_1\oplus a_2...\oplus a_n\ne 0$ 的状态，一定存在某种移动使 $a_1\oplus a_2...\oplus a_n=0$   
	- 我们设 $a_1\oplus a_2...\oplus a_n=k\ne0$ ，我们将 $a_i$ 改为 $a_i'$ ，则 $a_i'=a_i \oplus k$ 
	- 我们设 $k$ 的二进制最高位 $1$ 为 $d$ ，既 $2^d\leq k<2^{d+1}$ 
	- 一定有奇数个 $a_i$ 的二进制第 $d$ 位为 $1$ 
	- 满足这个条件的 $a_i$ 满足 $a_i>a_i \oplus k$ 
- 对于 $a_1\oplus a_2...\oplus a_n= 0$ 的状态，一定不存在某种移动使 $a_1\oplus a_2...\oplus a_n\ne0$   
	- 如果我们要将 $a_i$ 改为 $a_i'$ ，那么 $a_i=a_i'$ 

## 有向图与SG函数

- 大部分博弈游戏都可以转化成有向图
- 可以看成在一个有向图上移动棋子，最后一个不能走的人判负
- 那么对于状态 $x$ 和它的所有后继 $y_1,y_2...y_n$ ，我们定义 $SG$ 函数为
$$SG(x)=mex\left\{SG(y_1),SG(y_2)...SG(y_n)\right\}$$
- 那么对于有 $n$ 个有向图组成的组合游戏，设他们的起点为 $s_1,s_2...s_n$ ，那么当且仅当 $SG(s_1)\oplus SG(s_2)...\oplus SG(s_n) \ne 0$ 时这个游戏时先手必胜，反之必败 
