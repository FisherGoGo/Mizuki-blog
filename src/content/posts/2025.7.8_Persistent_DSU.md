---
title: 2025.7.8 可持久化数据结构题解
published: 2025-07-08
tags: [DS]
category: Tutorial
draft: false
---

# A

- 板子题

# B

- 板子题

# C

- 可持久化 $\mathbf{Trie}$ 树板子题，既求区间中取一个数使得其与 $x$ 异或结果最大

# D

- 打一个前缀异或和，然后同 C，注意在开始时加入一个0先，代表前 $0$ 个数异或和是 $0$
- 有以下式子
$$(a_{p} \oplus a_{p+1} \oplus...\oplus a_{N})\oplus x=(a_{1}\oplus a_{2}\oplus...\oplus a_{N})\oplus x\oplus(a_1\oplus...\oplus a_{p-1})$$

# E

- 可持久化权值线段树数统计个数，对于交换的操作既 $i$ 这棵树的 $a_{i}$ 少了一个 $a_{i+1}$ 多了一个

# F

- 跟 $A$ 没什么区别，撤销既把新的根节点连过去

# G

-  $\mathbf{DSU\; On\; Tree}$ ，用给出的公式求取即可，注意强制在线

# H

- 跟 $G$ 一样，多了个求子树，不过用的是可持久化 $\mathbf{Trie}$ 树

# I

- 我们设 $f_{i,j}$ 为数字 $j$ 在位置 $i$ 之前出现最后一次的位置，求 $\mathbf{mex}$ 既是求对于找到最小的 $v$ 使得 $f_{r,v}<l$ ，依旧可持久化线段树维护

# J


- 这道题不一样的数据有不一样的写法，对于 $r\ne 1$ 时的写法就不讲了，当 $n=1$ 时用可持久化线段树维护权值线段树上的区间和计数和，然后用类似求区间第 $k$ 大的方法来二分求解

# K

- 用可持久化线段树继承的性质来差分，然后就是类似求区间第 $k$ 小来求和

# L

- 注意到如果一个数出现超过 $k$ 次，我们从第一个开始 $k$ 个 $k$ 个地取一定会取到这个数，然后根据 $\frac{r-l+1}{k}$ 较大，我们可以取第 $rk$ 小，第 $rk*2$ 大等等来看其出现次数有没有超过要求次数

# M

- 我们从高位往低位贪心，假如我们现在已经得到的答案时 $\mathbf{cur}$ ，如果当前为 $0$ ，我们目标就是 $i$ ，既在区间中找存不存在 $[cur+2^{i}-x,cur+2^{i+1}-x)$ 的数，反之找 $[cur-x,cur+2^{i}-x)$

# N

- 板子题

# O

- 先按照成绩排序，然后从成绩大到小枚举，看能不能在左右区间各取 $\frac{n-1}{2}$ 个数出来，如果可以的话各取前 $\frac{n-1}{2}$ 小，然后看是不是小于 $f$ 即可，总复杂度 $O(n\log n)$ 
